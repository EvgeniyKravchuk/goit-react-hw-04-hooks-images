{"version":3,"sources":["components/General/General.styled.jsx","components/Searchbar/Searchbar.styled.jsx","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.styled.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.styled.jsx","components/LoadMoreButton/LoadMoreButton.styled.jsx","components/LoadMoreButton/LoadMoreButton.jsx","components/Modal/Modal.styled.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","components/Loader/Loader.jsx","App.js","index.js"],"names":["Wrapper","styled","div","Section","section","Header","header","Form","form","Input","input","Button","button","Searchbar","onSubmit","name","type","autocomplete","autoFocus","placeholder","Item","li","Image","img","ImageGalleryItem","search","page","scroll","setPage","hideLoader","openModal","useState","response","setRespone","mainPage","useEffect","list","document","querySelector","addEventListener","removeEventListener","fetchImagesByName","then","errorMessage","fetch","json","data","hits","length","Promise","reject","Error","catch","error","alert","message","finally","map","item","id","webformatURL","tags","largeImageURL","src","alt","List","ul","Btn","LoadMoreButton","onClick","Backdrop","modalPortal","Modal","url","closeModal","backdropRef","window","createPortal","className","ImageGallery","modalUrl","setModalUrl","modalIsOpen","setModalIsOpen","evt","target","nodeName","dataset","big_image","scrollTo","top","documentElement","scrollHeight","behavior","code","Loaders","color","height","width","App","setSearch","loaderAreShown","setLoaderAreShown","searchCheck","inputValue","value","preventDefault","trim","handleSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0155ebd6.chunk.js","sourcesContent":["import styled from \"@emotion/styled\";\n\nexport const Wrapper = styled.div`\n  width: 1400px;\n\n  margin-left: auto;\n  margin-right: auto;\n\n  background: #ffffff;\n\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\n`;\n\nexport const Section = styled.section`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background-color: white;\n\n  padding: 10px;\n`;\n","import styled from \"@emotion/styled\";\n\nexport const Header = styled.header`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background-color: #18166b;\n\n  padding: 10px;\n`;\n\nexport const Form = styled.form`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const Input = styled.input`\n  width: 400px;\n  height: 40px;\n\n  font-size: 20px;\n  font-weight: 500;\n\n  border-bottom-left-radius: 5px;\n  border-top-left-radius: 5px;\n\n  padding: 5px;\n\n  border: none;\n\n  &:focus {\n    outline: none;\n    background-color: #cdcdfd;\n    & + button {\n    }\n  }\n`;\n\nexport const Button = styled.button`\n  width: 40px;\n  height: 40px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background-color: white;\n\n  border: none;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  border-left: 1px solid #18166b;\n\n  cursor: pointer;\n`;\n","import PropTypes from \"prop-types\";\nimport { Form, Input, Header, Button } from \"./Searchbar.styled\";\nimport { FcSearch } from \"react-icons/fc\";\n\nexport default function Searchbar({ onSubmit }) {\n  return (\n    <Header>\n      <Form onSubmit={onSubmit} name=\"search\">\n        <Input\n          name=\"search\"\n          type=\"text\"\n          autocomplete=\"off\"\n          autoFocus\n          placeholder=\"Введите название для поиска\"\n        />\n        <Button type=\"submit\">\n          <FcSearch />\n        </Button>\n      </Form>\n    </Header>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import styled from \"@emotion/styled\";\n\nexport const Item = styled.li`\n  width: 330px;\n  height: 200px;\n  margin-bottom: 10px;\n\n  cursor: pointer;\n`;\n\nexport const Image = styled.img`\n  width: 100%;\n  height: 100%;\n`;\n","import PropTypes from \"prop-types\";\nimport { useState, useEffect } from \"react\";\nimport { Item, Image } from \"./ImageGalleryItem.styled\";\n\nexport default function ImageGalleryItem({\n  search,\n  page,\n  setPage,\n  scroll,\n  hideLoader,\n  openModal,\n}) {\n  const [response, setRespone] = useState([]);\n  var mainPage = page;\n\n  useEffect(() => {\n    const list = document.querySelector(\"ul\");\n\n    list.addEventListener(\"click\", openModal);\n\n    return () => {\n      list.removeEventListener(\"click\", openModal);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    mainPage = 1;\n    setRespone([]);\n    fetchImagesByName();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [search]);\n\n  useEffect(() => {\n    if (page === 1) {\n      return;\n    }\n    fetchImagesByName().then(scroll);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page]);\n\n  const fetchImagesByName = () => {\n    const API_KEY = \"22542197-803b3827949c8e03dddadbe4d\";\n    const errorMessage = `Изображений по ключевому слову ${search} не найдено`;\n    return fetch(\n      `https://pixabay.com/api/?q=${search}&page=${mainPage}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`\n    )\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        if (data.hits.length === 0) {\n          return Promise.reject(new Error(errorMessage));\n        }\n\n        return setRespone((response) => [...response, ...data.hits]);\n      })\n      .catch((error) => alert(error.message))\n      .finally(() => {\n        hideLoader();\n      });\n  };\n\n  return response.map((item) => {\n    const { id, webformatURL, tags, largeImageURL } = item;\n\n    return (\n      <Item key={id}>\n        <Image src={webformatURL} alt={tags} data-big_image={largeImageURL} />\n      </Item>\n    );\n  });\n}\n\nImageGalleryItem.propTypes = {\n  hideLoader: PropTypes.func.isRequired,\n  openModal: PropTypes.func.isRequired,\n  page: PropTypes.number.isRequired,\n  search: PropTypes.string.isRequired,\n};\n","import styled from \"@emotion/styled\";\n\nexport const List = styled.ul`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  flex-wrap: wrap;\n`;\n","import styled from \"@emotion/styled\";\n\nexport const Btn = styled.button`\n  width: 200px;\n  height: 40px;\n\n  font-size: 26px;\n  font-weight: 600;\n\n  border-radius: 5px;\n  border: none;\n\n  cursor: pointer;\n\n  color: white;\n  background-color: #18166b;\n`;\n","import PropTypes from \"prop-types\";\nimport { Btn } from \"./LoadMoreButton.styled\";\nimport { Section } from \"../General/General.styled\";\n\nexport default function LoadMoreButton({ onClick }) {\n  return (\n    <Section>\n      <Btn type=\"button\" onClick={onClick}>\n        Еще...\n      </Btn>\n      ;\n    </Section>\n  );\n}\n\nLoadMoreButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import styled from \"@emotion/styled\";\n\nexport const Backdrop = styled.div`\n  width: 100vw;\n  height: 100vh;\n\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  background: rgba(0, 0, 0, 0.7);\n`;\n\nexport const Image = styled.img`\n  width: 800px;\n  height: auto;\n\n  opacity: 1;\n`;\n","import PropTypes from \"prop-types\";\nimport { useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { Backdrop, Image } from \"./Modal.styled\";\n\nconst modalPortal = document.querySelector(\"#modal-root\");\n\nexport default function Modal({ url, closeModal }) {\n  useEffect(() => {\n    const backdropRef = document.querySelector(\".backdrop\");\n\n    backdropRef.addEventListener(\"click\", closeModal);\n    window.addEventListener(\"keydown\", closeModal);\n\n    return () => {\n      backdropRef.removeEventListener(\"click\", closeModal);\n      window.removeEventListener(\"keydown\", closeModal);\n    };\n  });\n\n  return createPortal(\n    <Backdrop className=\"backdrop\">\n      <Image src={url} alt=\"\" />\n    </Backdrop>,\n    modalPortal\n  );\n}\n\nModal.propTypes = {\n  closeModal: PropTypes.func.isRequired,\n  url: PropTypes.string.isRequired,\n};\n","import PropTypes from \"prop-types\";\nimport { useState } from \"react\";\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport { List } from \"./ImageGallery.styled\";\nimport { Section } from \"../General/General.styled\";\nimport LoadMoreButton from \"../LoadMoreButton/LoadMoreButton\";\nimport Modal from \"../Modal/Modal\";\n\nexport default function ImageGallery({ search, hideLoader }) {\n  const [page, setPage] = useState(1);\n  const [modalUrl, setModalUrl] = useState(\"\");\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n\n  const scroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  const openModal = (evt) => {\n    if (evt.target.nodeName === \"IMG\") {\n      setModalIsOpen(true);\n      setModalUrl(evt.target.dataset.big_image);\n    }\n  };\n\n  const closeModal = (evt) => {\n    if (evt.target.nodeName === \"DIV\" || evt.code === \"Escape\") {\n      setModalIsOpen(false);\n    }\n  };\n\n  return (\n    <>\n      <Section>\n        <List>\n          <ImageGalleryItem\n            openModal={(evt) => openModal(evt)}\n            hideLoader={hideLoader}\n            search={search}\n            setPage={setPage}\n            page={page}\n            scroll={scroll}\n          />\n        </List>\n      </Section>\n      <LoadMoreButton onClick={() => setPage((page) => page + 1)} />\n      {modalIsOpen && (\n        <Modal url={modalUrl} closeModal={(evt) => closeModal(evt)} />\n      )}\n    </>\n  );\n}\n\n// export default class ImageGallery extends Component {\n//   state = {\n//     page: 1,\n//     modalUrl: \"\",\n//     modalIsOpen: false,\n//   };\n\n//   scroll = () => {\n//     window.scrollTo({\n//       top: document.documentElement.scrollHeight,\n//       behavior: \"smooth\",\n//     });\n//   };\n\n//   increasePage = () => {\n//     this.setState((prevState) => ({ page: prevState.page + 1 }));\n//   };\n\n//   openModal = (evt) => {\n//     if (evt.target.nodeName === \"IMG\") {\n//       this.setState({\n//         modalIsOpen: true,\n//         modalUrl: evt.target.dataset.big_image,\n//       });\n//     }\n//   };\n\n//   closeModal = (evt) => {\n//     if (evt.target.nodeName === \"DIV\" || evt.code === \"Escape\") {\n//       this.setState({\n//         modalIsOpen: false,\n//       });\n//     }\n//   };\n\n//   render() {\n//     const { modalIsOpen, modalUrl, page } = this.state;\n//     const { search, hideLoader } = this.props;\n\n//     return (\n//       <>\n//         <Section>\n//           <List>\n//             <ImageGalleryItem\n//               openModal={this.openModal}\n//               hideLoader={hideLoader}\n//               search={search}\n//               page={page}\n//               scroll={this.scroll}\n//             />\n//           </List>\n//         </Section>\n//         <LoadMoreButton onClick={this.increasePage} />{\" \"}\n//         {modalIsOpen && <Modal url={modalUrl} closeModal={this.closeModal} />}\n//       </>\n//     );\n//   }\n// }\n\nImageGallery.propTypes = {\n  hideLoader: PropTypes.func.isRequired,\n  search: PropTypes.string.isRequired,\n};\n","import Loader from \"react-loader-spinner\";\nimport { Section } from \"../General/General.styled\";\n\nexport default function Loaders() {\n  return (\n    <Section>\n      <Loader type=\"ThreeDots\" color=\"#18166b\" height={80} width={80} />;\n    </Section>\n  );\n}\n","import { useState } from \"react\";\nimport { Wrapper } from \"./components/General/General.styled\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport Loaders from \"./components/Loader/Loader\";\n\nexport default function App() {\n  const [search, setSearch] = useState(\"\");\n  const [loaderAreShown, setLoaderAreShown] = useState(false);\n\n  const handleSubmit = (evt) => {\n    const inputValue = evt.target[0].value;\n\n    evt.preventDefault();\n\n    setLoaderAreShown(true);\n\n    if (inputValue.trim() === \"\") {\n      alert(\"Введите ключевое слово для поиска картинок\");\n      return;\n    }\n    setSearch(inputValue);\n\n    evt.target[0].value = \"\";\n  };\n\n  const searchCheck = search === \"\";\n  return (\n    <Wrapper>\n      <Searchbar onSubmit={(evt) => handleSubmit(evt)} />\n      {loaderAreShown && <Loaders />}\n      {!searchCheck && (\n        <ImageGallery\n          search={search}\n          hideLoader={() => setLoaderAreShown(false)}\n        />\n      )}\n    </Wrapper>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}